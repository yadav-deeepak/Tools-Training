#####################
â„ï¸ What is Docker ?
####################
âž¤ Docker will make our application compatible to run on different platforms.
âž¤ Docker will make our application portable we can run our application on any server and it will run for sure.
âž¤ Resolves compatibility problem using containerization 
âž¤ Docker will help us to install our software on different server without worrying about compatibility issue
âž¤ To deploy same application on multiple servers for load balancing we need not manually install technology stack (like Angular 18v, java 17V etc) manually one by one if docker is not used
âž¤ Software updates can be done easily on multiple machines using docker

ðŸ‘‰ Note:
âœ” Docker Engine acts as a bridge between the container and the host OS
âœ” Containers donâ€™t have their own kernel, they use the hostâ€™s kernel
âœ” Docker Engine manages containers but does not create themâ€”it runs & controls them

âž¤ We will create a linux VM and install linux OS in it on top of linux OS we will also install Docker Engine in it.
âž¤ Our application will run in an isolated environment inside the linux vm this isolated environment is called as docker container.
âž¤ Docker engine will act as a bridge that will help us to run docker container inside the Linux OS.
âž¤ Docker container will provide us an environment where we can run our app code it will also provide us all the softwares that are required to run that application this container will run inside linux system but for this container to run inside the linux OS the Docker engine will act as a bridge.

########################
â„ï¸ Docker Architecture 
########################
âž¤ The architecture of docker consists of 4 major files : 
ðŸ‘‰ Docker file: Here we will provide instructions to create docker image 
âž¤ Here we will write the depedencies that we need to download + app code jar 
âž¤ We write docker file inside the root directory of spring boot app .

ðŸ‘‰ Docker image: Application package with dependencies of it 
âž¤ Will consist of all the softwares and the app code that we need to run.

ðŸ‘‰ Docker registry: Its a hub to store docker images
âž¤ Here we store the docker image just like maven has a library of dependencies we have docker registry .

ðŸ‘‰ Docker Container: Isolated environment to run docker image
âž¤ We will pull the image from the docker hub and then we will create docker container to run this container we require docker engine so that our docker containers can run easily on the linux server.

âž¤ Dockers are best suitable to run on linux 

#######################
â„ï¸ Installing Docker 
######################
âž¤ Open aws and there create an ec2 instance 
âž¤ Connect to the ec2 instance and then install docker in your linux vm 
âž¤ Use the commands given below this will install the docker in your linux OS 

sudo yum update -y 
sudo yum install docker -y
sudo service docker start
sudo usermod -aG docker ec2-user
exit

âž¤ After installation is completed again connect to your ec2 instance and check if docker is installed or not run
docker -v 

docker pull hello-world
// This command is used to pull the image from the docker hub here we are pulling an image named hello-world from docker hub

âž¤ docker images : this command is used to give all the images that are present in your local machine 

âž¤ docker ps : This command will show the container that is currently executing / running.
docker ps -a : this will show us the container that got executed and in stopped status.

âž¤ docker run image-name : this command is used to run the docker image

âž¤ docker system prune -a : In order to remove the containers that are present in stopped status we use this command.

âž¤ docker stop container-id : This will stop the container .

###################################################################
â„ï¸ How to create docker image and run that to access from browser 
###################################################################
âž¤ When we run our docker image from the docker hub using this command 
docker run image-name 
âž¤ This command when executed we wont be access our container in browser because it requires port mapping.
âž¤ As the container is running inside linux VM . We will have to map linux vm (host port) to container(Container port) this is called as port mapping . To do this perform the following: 

docker run -p host-port:container-port [image name] 
// This will map the container port number to our host port number (VM port number)

Example: docker run -p 9090:9090 [image-name]
-> Also run the container in the background 
âœ”ï¸ Now you can access the application using this url http://public-ip:host-port(linux VM) 

ðŸ‘‰ Note: Dont forget to enable the inbound rule in security group custom IP --> IPV4 anywhere with host port number.
âž¤ If you run multiple containers in same linux vm then host port number should be different for every container.

âž¤ If you want to the the process in the background means if you close the git bash then also it will work then use this command:
docker run -p -d 9091:9090 image-name
// This will run our container in the background we can perform other task on the same git bash and our container will still be running on the background.
âž¤ To stop the container do docker stop container-id // this command will stop the container.

ðŸŒŸ What are the advantages of images  
**************************************
âž¤ Let us suppose that we want to install jenkins in our vm to automate the deployment process so one way to do it is without using images manually installing everything other way is using the image to download/install jenkins 

âœ¨ Without image 
==================
â˜ƒï¸ If Docker not used then we have to do the following to install jekins in linux vm

Step - 1 : Create Linux VM with Ubuntu, use t2.micro as jekins is heavy software & requires good configuration server

Create Ubuntu VM using AWS EC2 (t2.medium)
Enable 8080 Port Number in Security Group Inbound Rules
Connect to VM using ssh cleint

Step-2 : Install Jdk as jekins is java application and requires jdk to run jekins

sudo apt update
sudo apt install fontconfig openjdk-17-jre
java -version

Step-3 : Install Jenkins
sudo wget -O /usr/share/keyrings/jenkins-keyring.asc \
  https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null
sudo apt-get update
sudo apt-get install jenkins

Step-4 : Start Jenkins application using the commands given below
sudo systemctl enable jenkins
sudo systemctl start jenkins

Step-5 : Verify Jenkins
sudo systemctl status jenkins

Step-6 : Open jenkins server in browser using VM public ip. Jekins runs on port 8080 by default
http://public-ip-address:8080/

Step-7 : Copy jenkins admin pwd
sudo cat /var/lib/jenkins/secrets/initialAdminPassword

Step-8 : Create Admin Account & Install Required Plugins in Jenkins to start your CI/CD pipeline learning journey

âœ¨ Using docker image 
=======================
âž¤ Install jekins using docker image name - docker run -d -p 8080:8080 jenkins/jenkins

Note Enable Inbound rule in security group custom ip 8080 IPv4 anywhere

âž¤ Docker image will simplify  our journey to get required softwares in server through sinlge line

âž¤ Example download Sonarqube using docker image. If not use linux command to do the same.

docker run -d --name sonarqube -p 9000:9000 -p 9092:9092 sonarqube:lts-community

âž¤ Example download nexus using docker image, If not use linux command to do the same.

docker run -d -p 8081:8081 --name nexus sonatype/nexus3